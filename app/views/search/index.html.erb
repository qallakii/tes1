<div class="dashboard-page">
  <div class="drive-page-head" style="display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;">
    <h2 style="margin:0;">Search</h2>

    <%= form_with url: search_path, method: :get, local: true, style: "display:flex; gap:8px;" do %>
      <input class="drive-input" type="text" name="q" value="<%= @q %>" placeholder="Search folders or filesâ€¦" />
      <button class="btn primary" type="submit">Search</button>
    <% end %>
  </div>

  <% if @q.present? %>
    <div class="drive-card" style="padding:14px; margin-top:12px;">
      <div style="font-weight:700;">Folders</div>
      <% if @folders.any? %>
        <ul>
          <% @folders.each do |f| %>
            <li><%= link_to f.name, folder_path(f) %></li>
          <% end %>
        </ul>
      <% else %>
        <div class="muted">No folders found.</div>
      <% end %>

      <div style="height:10px;"></div>

      <div style="font-weight:700;">Files</div>
      <% if @cvs.any? %>
        <ul>
          <% @cvs.each do |cv| %>
            <li>
              <%= link_to(cv.title.presence || cv.file.filename.to_s, folder_path(cv.folder)) %>
              <span class="muted">in <%= cv.folder.name %></span>
            </li>
          <% end %>
        </ul>
      <% else %>
        <div class="muted">No files found.</div>
      <% end %>
    </div>
  <% end %>
</div>
